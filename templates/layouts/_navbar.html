<div class="navbar">
  <div class="nav-left">
    <button
      class="mobile-menu-btn"
      onclick="toggleMobileSidebar()"
      aria-label="Menu">
      â˜°
    </button>
    <div class="breadcrumb">
      ğŸ“ {%block breadcrumb %}Dashboard{%endblock %}
    </div>
  </div>

  <div class="nav-actions">
    <!-- Sidebar Collapse (Desktop) -->
    <button
      class="nav-action-btn"
      onclick="toggleSidebarCollapse()"
      title="Toggle Sidebar"
      id="collapseBtn"
      style="display: none">
      <span id="collapseIcon">â—€</span>
    </button>

    <!-- Theme Toggle -->
    <button
      class="theme-toggle"
      onclick="toggleTheme()"
      title="Toggle Light/Dark Mode"
      id="themeBtn">
      <span id="themeIcon">â˜€ï¸</span>
    </button>

    <div class="nav-separator"></div>

    <!-- Activity -->
    <a
      href="{%url 'activity_feed' %}"
      class="nav-action-btn"
      title="Activity Feed">
      ğŸ”” {%if unread_activity_count > 0 %}
      <span class="count-badge">{{unread_activity_count }}</span>
      {%endif %}
    </a>

    <!-- Announcements -->
    <a
      href="{%url 'announcement_list' %}"
      class="nav-action-btn"
      title="Announcements">
      ğŸ“¢ {%if unread_announcement_count > 0 %}
      <span class="count-badge">{{unread_announcement_count }}</span>
      {%endif %}
    </a>

    <!-- Edit Requests (Admin) -->
    {%if request.user.role == 'admin' %}
    <a
      href="{%url 'notification_list' %}"
      class="nav-action-btn"
      title="Edit Requests">
      ğŸ“‹ {%if unread_notification_count > 0 %}
      <span class="count-badge">{{unread_notification_count }}</span>
      {%endif %}
    </a>
    {%endif %}

    <div class="nav-separator"></div>

    <!-- Profile -->
    <a href="{%url 'profile' %}" class="nav-profile" title="My Profile">
      {%if request.user.photo %}
      <img
        src="{{request.user.photo.url }}"
        alt=""
        class="nav-avatar"
        style="object-fit: cover"
      />
      {%else %}
      <div class="nav-avatar">{{request.user.initials }}</div>
      {%endif %}
      <span class="nav-name">{{request.user.full_name|truncatewords:2 }}</span>
    </a>

    <!-- Logout -->
    <a href="{%url 'logout' %}" class="nav-logout" title="Logout">ğŸšª</a>
  </div>
</div>

<script>
  // Show collapse button only on desktop
  if (window.innerWidth > 768) {
    document.getElementById("collapseBtn").style.display = "flex";
  }
</script>
