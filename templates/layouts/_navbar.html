<div class="navbar">
  <div class="nav-left">
    <button class="mobile-menu-btn" onclick="toggleMobileSidebar()" aria-label="Menu">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="18" x2="21" y2="18"/></svg>
    </button>
    <div class="breadcrumb">
      ğŸ“ {% block breadcrumb %}Dashboard{% endblock %}
    </div>
  </div>

  <div class="nav-actions">
    <!-- Sidebar Collapse (Desktop) -->
    <button class="nav-action-btn" onclick="toggleSidebarCollapse()" title="Toggle Sidebar" id="collapseBtn" style="display: none;">
      <span id="collapseIcon">â—€</span>
    </button>

    <!-- Theme Toggle -->
    <button class="theme-toggle" onclick="toggleTheme()" title="Toggle Light/Dark Mode" id="themeBtn" aria-label="Toggle theme">
      <span id="themeIcon">â˜€ï¸</span>
    </button>

    <div class="nav-separator"></div>

    <!-- Activity -->
    <a href="{% url 'activity_feed' %}" class="nav-action-btn" title="Activity Feed">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 0 1-3.46 0"/></svg>
      {% if unread_activity_count > 0 %}
      <span class="count-badge">{{ unread_activity_count }}</span>
      {% endif %}
    </a>

    <!-- Announcements -->
    <a href="{% url 'announcement_list' %}" class="nav-action-btn" title="Announcements">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
      {% if unread_announcement_count > 0 %}
      <span class="count-badge">{{ unread_announcement_count }}</span>
      {% endif %}
    </a>

    <!-- Edit Requests (Admin) -->
    {% if request.user.role == 'admin' %}
    <a href="{% url 'notification_list' %}" class="nav-action-btn" title="Edit Requests">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/></svg>
      {% if unread_notification_count > 0 %}
      <span class="count-badge">{{ unread_notification_count }}</span>
      {% endif %}
    </a>
    {% endif %}

    <div class="nav-separator"></div>

    <!-- Profile -->
    <a href="{% url 'profile' %}" class="nav-profile" title="My Profile">
      {% if request.user.photo %}
      <img src="{{ request.user.photo.url }}" alt="" class="nav-avatar" style="object-fit: cover;" />
      {% else %}
      <div class="nav-avatar">{{ request.user.initials }}</div>
      {% endif %}
      <span class="nav-name">{{ request.user.full_name|truncatewords:2 }}</span>
    </a>

    <!-- Logout -->
    <a href="{% url 'logout' %}" class="nav-logout" title="Logout" aria-label="Logout">
      <svg width="17" height="17" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
    </a>
  </div>
</div>