<!doctype html>
<html lang="en" data-theme="light">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %}SMS Portal{% endblock %}</title>
    <link rel="icon" href="/static/images/favicon.ico" type="image/x-icon" />
    <link
      href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      /* =============================================================
         SMS PORTAL ‚Äî Glassmorphism + Soft 3D Theme (ALL STYLES)
         ============================================================= */

      :root {
        --transition-speed: 0.25s;
        --transition-bounce: cubic-bezier(0.34, 1.56, 0.64, 1);
        --transition-smooth: cubic-bezier(0.25, 0.46, 0.45, 0.94);
        --transition-default: cubic-bezier(0.4, 0, 0.2, 1);
        --radius-sm: 10px;
        --radius-md: 14px;
        --radius-lg: 20px;
        --radius-xl: 24px;
        --radius-pill: 999px;
        --spacing-xs: 4px;
        --spacing-sm: 8px;
        --spacing-md: 16px;
        --spacing-lg: 24px;
        --spacing-xl: 32px;
      }

      /* LIGHT THEME */
      [data-theme="light"] {
        --primary: #5B6CF9;
        --primary-light: #7B8AFF;
        --primary-dark: #4F5FD4;
        --primary-glow: rgba(91, 108, 249, 0.12);
        --primary-glow-strong: rgba(91, 108, 249, 0.2);
        --bg-body: #ECEEF5;
        --bg-sidebar: rgba(255, 255, 255, 0.55);
        --bg-navbar: rgba(255, 255, 255, 0.6);
        --bg-card: rgba(255, 255, 255, 0.55);
        --bg-card-hover: rgba(255, 255, 255, 0.7);
        --bg-input: rgba(255, 255, 255, 0.65);
        --bg-input-focus: rgba(91, 108, 249, 0.04);
        --bg-hover: rgba(91, 108, 249, 0.05);
        --bg-active: rgba(91, 108, 249, 0.1);
        --border: rgba(255, 255, 255, 0.7);
        --border-hover: rgba(91, 108, 249, 0.2);
        --border-focus: #5B6CF9;
        --border-card: rgba(255, 255, 255, 0.8);
        --text-primary: #2D3250;
        --text-secondary: #5A5F7D;
        --text-muted: #7A7F9A;
        --text-placeholder: #A0A8B8;
        --success: #10b981;
        --success-bg: rgba(16, 185, 129, 0.1);
        --success-text: #059669;
        --warning: #f59e0b;
        --warning-bg: rgba(245, 158, 11, 0.1);
        --warning-text: #d97706;
        --danger: #E05C5C;
        --danger-bg: rgba(224, 92, 92, 0.1);
        --danger-text: #dc2626;
        --info: #4F8EF7;
        --info-bg: rgba(79, 142, 247, 0.1);
        --info-text: #2563eb;
        --shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.03);
        --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.04), 0 4px 12px rgba(0, 0, 0, 0.03);
        --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.04), 0 10px 30px rgba(0, 0, 0, 0.08);
        --shadow-lg: 0 8px 16px rgba(0, 0, 0, 0.06), 0 20px 48px rgba(0, 0, 0, 0.1);
        --shadow-glow: 0 0 30px rgba(91, 108, 249, 0.08);
        --shadow-card: 0 4px 6px rgba(0, 0, 0, 0.04), 0 10px 30px rgba(0, 0, 0, 0.06);
        --shadow-card-hover: 0 8px 16px rgba(0, 0, 0, 0.06), 0 20px 40px rgba(0, 0, 0, 0.1);
        --shadow-button: 0 4px 14px rgba(91, 108, 249, 0.3);
        --shadow-button-hover: 0 8px 20px rgba(91, 108, 249, 0.4);
        --glass-blur: blur(16px);
        --glass-blur-strong: blur(24px);
        --glass-sidebar: blur(20px);
        --table-header-bg: rgba(91, 108, 249, 0.04);
        --table-row-hover: rgba(91, 108, 249, 0.03);
        --scrollbar-thumb: rgba(91, 108, 249, 0.15);
        --scrollbar-hover: rgba(91, 108, 249, 0.25);
        --neu-shadow-light: -4px -4px 8px rgba(255, 255, 255, 0.8);
        --neu-shadow-dark: 4px 4px 8px rgba(0, 0, 0, 0.06);
        --neu-inset-light: inset -2px -2px 4px rgba(255, 255, 255, 0.7);
        --neu-inset-dark: inset 2px 2px 4px rgba(0, 0, 0, 0.04);
      }

      /* DARK THEME */
      [data-theme="dark"] {
        --primary: #6B7BFF;
        --primary-light: #8B99FF;
        --primary-dark: #5B6CF9;
        --primary-glow: rgba(107, 123, 255, 0.12);
        --primary-glow-strong: rgba(107, 123, 255, 0.22);
        --bg-body: #0E1225;
        --bg-sidebar: rgba(18, 22, 45, 0.85);
        --bg-navbar: rgba(18, 22, 45, 0.75);
        --bg-card: rgba(25, 30, 58, 0.65);
        --bg-card-hover: rgba(30, 36, 68, 0.7);
        --bg-input: rgba(255, 255, 255, 0.05);
        --bg-input-focus: rgba(107, 123, 255, 0.06);
        --bg-hover: rgba(255, 255, 255, 0.04);
        --bg-active: rgba(107, 123, 255, 0.12);
        --border: rgba(255, 255, 255, 0.06);
        --border-hover: rgba(255, 255, 255, 0.12);
        --border-focus: #6B7BFF;
        --border-card: rgba(255, 255, 255, 0.08);
        --text-primary: #E8EAF0;
        --text-secondary: #A0A8C0;
        --text-muted: #6B7294;
        --text-placeholder: #4A5072;
        --success: #10b981;
        --success-bg: rgba(16, 185, 129, 0.1);
        --success-text: #34d399;
        --warning: #f59e0b;
        --warning-bg: rgba(245, 158, 11, 0.1);
        --warning-text: #fbbf24;
        --danger: #E05C5C;
        --danger-bg: rgba(224, 92, 92, 0.1);
        --danger-text: #f87171;
        --info: #4F8EF7;
        --info-bg: rgba(79, 142, 247, 0.1);
        --info-text: #60a5fa;
        --shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.2);
        --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.25);
        --shadow-md: 0 8px 24px rgba(0, 0, 0, 0.3);
        --shadow-lg: 0 16px 48px rgba(0, 0, 0, 0.4);
        --shadow-glow: 0 0 40px rgba(107, 123, 255, 0.08);
        --shadow-card: 0 4px 12px rgba(0, 0, 0, 0.2);
        --shadow-card-hover: 0 8px 24px rgba(0, 0, 0, 0.3);
        --shadow-button: 0 4px 14px rgba(107, 123, 255, 0.25);
        --shadow-button-hover: 0 8px 24px rgba(107, 123, 255, 0.35);
        --glass-blur: blur(16px);
        --glass-blur-strong: blur(24px);
        --glass-sidebar: blur(20px);
        --table-header-bg: rgba(255, 255, 255, 0.02);
        --table-row-hover: rgba(255, 255, 255, 0.03);
        --scrollbar-thumb: rgba(255, 255, 255, 0.08);
        --scrollbar-hover: rgba(255, 255, 255, 0.15);
        --neu-shadow-light: none;
        --neu-shadow-dark: none;
        --neu-inset-light: none;
        --neu-inset-dark: none;
      }

      /* ===== RESETS ===== */
      * { margin: 0; padding: 0; box-sizing: border-box; }

      body {
        font-family: 'Plus Jakarta Sans', -apple-system, BlinkMacSystemFont, sans-serif;
        background: var(--bg-body);
        color: var(--text-primary);
        display: flex;
        min-height: 100vh;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        line-height: 1.5;
      }

      /* ===== SCROLLBAR ===== */
      ::-webkit-scrollbar { width: 5px; height: 5px; }
      ::-webkit-scrollbar-track { background: transparent; }
      ::-webkit-scrollbar-thumb { background: var(--scrollbar-thumb); border-radius: 10px; }
      ::-webkit-scrollbar-thumb:hover { background: var(--scrollbar-hover); }
      ::selection { background: rgba(91, 108, 249, 0.2); color: var(--text-primary); }

      :focus-visible {
        outline: 2px solid var(--primary);
        outline-offset: 2px;
        border-radius: 4px;
      }

      /* ===== PAGE TRANSITION ===== */
      .page-transition-wrapper {
        animation: pageEnter 0.4s var(--transition-smooth) forwards;
      }

      @keyframes pageEnter {
        from { opacity: 0; transform: translateY(16px); }
        to { opacity: 1; transform: translateY(0); }
      }

      .page-transition-wrapper > * {
        animation: staggerFadeIn 0.4s var(--transition-smooth) both;
      }
      .page-transition-wrapper > *:nth-child(1) { animation-delay: 0ms; }
      .page-transition-wrapper > *:nth-child(2) { animation-delay: 60ms; }
      .page-transition-wrapper > *:nth-child(3) { animation-delay: 120ms; }
      .page-transition-wrapper > *:nth-child(4) { animation-delay: 180ms; }
      .page-transition-wrapper > *:nth-child(5) { animation-delay: 240ms; }

      @keyframes staggerFadeIn {
        from { opacity: 0; transform: translateY(12px); }
        to { opacity: 1; transform: translateY(0); }
      }

      /* ===== SIDEBAR ===== */
      .sidebar {
        width: 272px;
        background: var(--bg-sidebar);
        backdrop-filter: var(--glass-sidebar);
        -webkit-backdrop-filter: var(--glass-sidebar);
        border-right: 1px solid var(--border-card);
        position: fixed;
        height: 100vh;
        overflow-y: auto;
        z-index: 100;
        display: flex;
        flex-direction: column;
        transition: width 0.35s var(--transition-bounce), transform 0.35s var(--transition-bounce);
        box-shadow: 4px 0 24px rgba(0, 0, 0, 0.03);
      }

      [data-theme="dark"] .sidebar {
        box-shadow: 4px 0 24px rgba(0, 0, 0, 0.15);
      }

      .sidebar.collapsed { width: 72px; }

      .sidebar.collapsed .sidebar-header h2,
      .sidebar.collapsed .sidebar-header .role-badge,
      .sidebar.collapsed .nav-text,
      .sidebar.collapsed .nav-badge,
      .sidebar.collapsed .nav-section,
      .sidebar.collapsed .user-name,
      .sidebar.collapsed .user-role {
        opacity: 0; width: 0; overflow: hidden; white-space: nowrap;
        transition: opacity 0.15s ease, width 0.25s ease;
      }

      .sidebar.collapsed .sidebar-header { padding: 16px 12px; }
      .sidebar.collapsed .sidebar-nav a { justify-content: center; padding: 11px; margin: 2px 8px; }
      .sidebar.collapsed .sidebar-nav a .nav-icon { margin: 0; }
      .sidebar.collapsed .sidebar-user .user-card { justify-content: center; padding: 10px; }
      .sidebar.collapsed + .main-content { margin-left: 72px; }

      /* Tooltip on collapsed */
      .sidebar.collapsed .sidebar-nav a { position: relative; }
      .sidebar.collapsed .sidebar-nav a::after {
        content: attr(data-tooltip);
        position: absolute;
        left: calc(100% + 12px);
        top: 50%;
        transform: translateY(-50%) scale(0.92);
        background: var(--bg-card);
        color: var(--text-primary);
        padding: 6px 12px;
        border-radius: 8px;
        font-size: 12px;
        font-weight: 600;
        white-space: nowrap;
        pointer-events: none;
        opacity: 0;
        transition: all 0.2s ease;
        box-shadow: var(--shadow-md);
        border: 1px solid var(--border);
        z-index: 200;
      }
      .sidebar.collapsed .sidebar-nav a:hover::after {
        opacity: 1;
        transform: translateY(-50%) scale(1);
      }

      .sidebar-header {
        padding: 22px 20px;
        border-bottom: 1px solid var(--border);
        text-align: center;
      }

      .sidebar-header .logo-container {
        width: 44px; height: 44px;
        margin: 0 auto 10px;
        background: linear-gradient(135deg, #6B7BFF, #4F5FD4);
        border-radius: 14px;
        display: flex; align-items: center; justify-content: center;
        font-size: 22px;
        box-shadow: 0 6px 20px rgba(91, 108, 249, 0.3);
        transition: transform 0.35s var(--transition-bounce);
      }

      .sidebar-header .logo-container:hover {
        transform: scale(1.08) rotate(5deg);
      }

      .sidebar-header h2 {
        font-size: 15px; font-weight: 700; color: var(--text-primary);
        transition: opacity 0.2s ease;
      }

      .sidebar-header .role-badge {
        display: inline-block; margin-top: 6px;
        padding: 3px 14px;
        border-radius: var(--radius-pill);
        font-size: 10px; font-weight: 600;
        text-transform: uppercase; letter-spacing: 0.6px;
        background: var(--primary-glow);
        color: var(--primary-light);
        border: 1px solid rgba(91, 108, 249, 0.15);
      }

      .sidebar-nav { flex: 1; padding: 12px 0; overflow-y: auto; }

      .sidebar-nav .nav-section {
        padding: 20px 20px 6px;
        font-size: 10px; font-weight: 600;
        text-transform: uppercase; letter-spacing: 1.2px;
        color: var(--text-muted);
      }

      .sidebar-nav a {
        display: flex; align-items: center; gap: 12px;
        padding: 10px 16px; margin: 2px 10px;
        color: var(--text-secondary);
        text-decoration: none;
        font-size: 13px; font-weight: 500;
        border-radius: var(--radius-sm);
        transition: all 0.2s var(--transition-default);
        position: relative; overflow: hidden;
      }

      .sidebar-nav a::before {
        content: '';
        position: absolute; inset: 0;
        background: var(--bg-hover);
        border-radius: var(--radius-sm);
        transform: scaleX(0);
        transform-origin: left;
        transition: transform 0.2s var(--transition-default);
        z-index: -1;
      }

      .sidebar-nav a:hover::before { transform: scaleX(1); }
      .sidebar-nav a:hover { color: var(--text-primary); transform: translateX(2px); }

      .sidebar-nav a.active {
        background: var(--bg-active);
        color: var(--primary);
        font-weight: 600;
      }

      .sidebar-nav a.active::after {
        content: '';
        position: absolute; left: 0; top: 20%; height: 60%; width: 3px;
        background: var(--primary);
        border-radius: 0 3px 3px 0;
        box-shadow: 0 0 12px rgba(91, 108, 249, 0.4);
      }

      .sidebar-nav a.active::before { display: none; }

      .sidebar-nav .nav-icon {
        font-size: 16px; width: 22px; text-align: center; flex-shrink: 0;
      }

      .nav-badge {
        margin-left: auto;
        min-width: 20px; height: 20px; padding: 0 6px;
        background: var(--danger); color: #fff;
        font-size: 10px; font-weight: 700;
        border-radius: var(--radius-pill);
        display: flex; align-items: center; justify-content: center;
        animation: badgePulse 2.5s ease-in-out infinite;
      }

      @keyframes badgePulse {
        0%, 100% { box-shadow: 0 0 0 0 rgba(224, 92, 92, 0.35); }
        50% { box-shadow: 0 0 0 6px rgba(224, 92, 92, 0); }
      }

      .sidebar-user {
        padding: 14px 16px;
        border-top: 1px solid var(--border);
      }

      .sidebar-user .user-card {
        display: flex; align-items: center; gap: 10px;
        padding: 10px 12px;
        background: var(--bg-hover);
        border-radius: var(--radius-md);
        border: 1px solid var(--border);
        transition: all 0.25s var(--transition-default);
        text-decoration: none; color: inherit;
        backdrop-filter: blur(8px);
      }

      .sidebar-user .user-card:hover {
        border-color: var(--border-hover);
        transform: translateY(-2px);
        box-shadow: var(--shadow-sm);
      }

      .sidebar-user .user-avatar {
        width: 36px; height: 36px;
        border-radius: var(--radius-sm);
        background: linear-gradient(135deg, #6B7BFF, #4F5FD4);
        color: #fff;
        display: flex; align-items: center; justify-content: center;
        font-weight: 700; font-size: 13px;
        flex-shrink: 0; object-fit: cover;
      }

      .sidebar-user .user-name {
        font-size: 13px; font-weight: 600; color: var(--text-primary);
      }

      .sidebar-user .user-role {
        font-size: 11px; color: var(--text-muted);
      }

      /* ===== MAIN CONTENT ===== */
      .main-content {
        margin-left: 272px; flex: 1;
        min-height: 100vh; display: flex; flex-direction: column;
        transition: margin-left 0.35s var(--transition-bounce);
      }

      /* ===== NAVBAR ===== */
      .navbar {
        height: 64px;
        background: var(--bg-navbar);
        backdrop-filter: var(--glass-blur-strong);
        -webkit-backdrop-filter: var(--glass-blur-strong);
        border-bottom: 1px solid var(--border);
        padding: 0 var(--spacing-lg);
        display: flex; justify-content: space-between; align-items: center;
        position: sticky; top: 0; z-index: 50;
        box-shadow: var(--shadow-xs);
      }

      .nav-left { display: flex; align-items: center; gap: 12px; }
      .breadcrumb { font-size: 13px; color: var(--text-muted); font-weight: 500; }
      .nav-actions { display: flex; align-items: center; gap: 4px; }

      .nav-action-btn {
        position: relative;
        width: 40px; height: 40px;
        display: flex; align-items: center; justify-content: center;
        border-radius: var(--radius-sm);
        text-decoration: none;
        color: var(--text-secondary); font-size: 16px;
        transition: all 0.2s var(--transition-default);
        border: 1px solid transparent;
        background: none; cursor: pointer;
      }

      .nav-action-btn:hover {
        background: var(--bg-hover);
        color: var(--text-primary);
        border-color: var(--border);
        transform: translateY(-1px);
      }

      .count-badge {
        position: absolute; top: 4px; right: 4px;
        min-width: 16px; height: 16px;
        background: var(--danger); color: #fff;
        font-size: 9px; font-weight: 700;
        border-radius: var(--radius-pill);
        display: flex; align-items: center; justify-content: center;
        padding: 0 4px;
        animation: badgePulse 2.5s ease-in-out infinite;
      }

      .theme-toggle {
        width: 40px; height: 40px;
        display: flex; align-items: center; justify-content: center;
        border-radius: var(--radius-sm);
        border: 1px solid var(--border);
        background: var(--bg-hover);
        color: var(--text-secondary); font-size: 16px;
        cursor: pointer;
        transition: all 0.3s var(--transition-default);
      }

      .theme-toggle:hover {
        border-color: var(--primary); color: var(--primary);
        transform: rotate(30deg) scale(1.05);
        box-shadow: 0 0 16px var(--primary-glow);
      }

      .nav-separator { width: 1px; height: 26px; background: var(--border); margin: 0 6px; }

      .nav-profile {
        display: flex; align-items: center; gap: 8px;
        padding: 5px 12px 5px 6px;
        border-radius: var(--radius-sm);
        text-decoration: none; color: var(--text-secondary);
        transition: all 0.2s var(--transition-default);
        border: 1px solid transparent;
      }

      .nav-profile:hover {
        background: var(--bg-hover); color: var(--text-primary);
        border-color: var(--border);
      }

      .nav-avatar {
        width: 32px; height: 32px;
        border-radius: var(--radius-sm);
        background: linear-gradient(135deg, #6B7BFF, #4F5FD4);
        color: #fff;
        display: flex; align-items: center; justify-content: center;
        font-size: 11px; font-weight: 700; object-fit: cover;
      }

      .nav-name { font-size: 13px; font-weight: 600; }

      .nav-logout {
        width: 40px; height: 40px;
        display: flex; align-items: center; justify-content: center;
        border-radius: var(--radius-sm);
        text-decoration: none; color: var(--danger-text);
        font-size: 15px;
        transition: all 0.2s var(--transition-default);
        border: 1px solid transparent;
      }

      .nav-logout:hover {
        background: var(--danger-bg);
        border-color: rgba(224, 92, 92, 0.15);
      }

      /* ===== CONTENT AREA ===== */
      .content-area { padding: var(--spacing-lg); flex: 1; }

      /* ===== FOOTER ===== */
      .footer {
        padding: 16px var(--spacing-lg);
        text-align: center; font-size: 12px;
        color: var(--text-muted);
        border-top: 1px solid var(--border);
      }

      /* ===== PAGE HEADER ===== */
      .page-header { margin-bottom: var(--spacing-lg); }

      .page-header h1 {
        font-size: 24px; font-weight: 700;
        color: var(--text-primary);
        letter-spacing: -0.3px; line-height: 1.2;
      }

      .page-header p {
        font-size: 14px; color: var(--text-muted);
        margin-top: 4px; line-height: 1.5;
      }

      /* ===== CARDS ===== */
      .card {
        background: var(--bg-card);
        backdrop-filter: var(--glass-blur);
        -webkit-backdrop-filter: var(--glass-blur);
        border-radius: var(--radius-lg);
        padding: var(--spacing-lg);
        border: 1px solid var(--border-card);
        margin-bottom: var(--spacing-md);
        transition: all 0.3s var(--transition-default);
        position: relative;
        box-shadow: var(--shadow-card);
      }

      .card:hover {
        border-color: var(--border-hover);
        box-shadow: var(--shadow-card-hover);
        transform: translateY(-2px);
      }

      .card-header {
        display: flex; justify-content: space-between; align-items: center;
        margin-bottom: var(--spacing-md);
        padding-bottom: 12px;
        border-bottom: 1px solid var(--border);
      }

      .card-header h3 {
        font-size: 15px; font-weight: 700; color: var(--text-primary);
      }

      /* ===== STAT CARDS ===== */
      .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(190px, 1fr));
        gap: var(--spacing-md);
        margin-bottom: var(--spacing-lg);
      }

      .stat-card {
        background: var(--bg-card);
        backdrop-filter: var(--glass-blur);
        -webkit-backdrop-filter: var(--glass-blur);
        border-radius: var(--radius-lg);
        padding: var(--spacing-lg);
        border: 1px solid var(--border-card);
        text-align: center;
        transition: all 0.3s var(--transition-default);
        cursor: default; position: relative; overflow: hidden;
        box-shadow: var(--shadow-card);
      }

      .stat-card::before {
        content: '';
        position: absolute; top: 0; left: 0; width: 100%; height: 100%;
        background: radial-gradient(circle at 50% 0%, var(--primary-glow), transparent 70%);
        opacity: 0; transition: opacity 0.35s ease;
      }

      .stat-card:hover {
        transform: translateY(-4px);
        border-color: rgba(91, 108, 249, 0.2);
        box-shadow: var(--shadow-card-hover), var(--shadow-glow);
      }

      .stat-card:hover::before { opacity: 1; }

      .stat-card .icon {
        font-size: 28px; margin-bottom: 8px;
        display: inline-block;
        transition: transform 0.35s var(--transition-bounce);
        position: relative; z-index: 1;
      }

      .stat-card:hover .icon { transform: scale(1.12) translateY(-3px); }

      .stat-card .value {
        font-size: 28px; font-weight: 700;
        color: var(--text-primary);
        position: relative; z-index: 1; line-height: 1.2;
      }

      .stat-card .label {
        font-size: 11px; color: var(--text-muted);
        margin-top: 4px; font-weight: 600;
        text-transform: uppercase; letter-spacing: 0.5px;
        position: relative; z-index: 1;
      }

      .stat-card .stat-link {
        display: inline-flex; align-items: center; gap: 4px;
        margin-top: 10px; font-size: 12px;
        color: var(--primary); text-decoration: none; font-weight: 600;
        position: relative; z-index: 1;
        padding: 4px 12px;
        border-radius: var(--radius-sm);
        background: var(--primary-glow);
        transition: all 0.2s var(--transition-default);
      }

      .stat-card .stat-link:hover {
        background: var(--primary-glow-strong);
        transform: translateX(2px);
      }

      /* ===== BUTTONS ===== */
      .btn {
        display: inline-flex; align-items: center; gap: 6px;
        padding: 9px 18px;
        border-radius: var(--radius-md);
        font-size: 13px; font-weight: 600;
        font-family: inherit;
        text-decoration: none;
        border: 1px solid transparent;
        cursor: pointer;
        transition: all 0.2s var(--transition-default);
        position: relative; overflow: hidden;
        white-space: nowrap; min-height: 40px; line-height: 1;
      }

      .btn:active { transform: scale(0.94) !important; transition-duration: 0.08s; }

      .btn .ripple {
        position: absolute; border-radius: 50%;
        background: rgba(255, 255, 255, 0.35);
        transform: scale(0);
        animation: rippleEffect 0.5s ease-out;
        pointer-events: none;
      }

      @keyframes rippleEffect { to { transform: scale(4); opacity: 0; } }

      .btn-secondary {
        background: rgba(255, 255, 255, 0.6);
        color: var(--text-secondary);
        border: 1px solid var(--border-card);
        box-shadow: var(--neu-shadow-light), var(--neu-shadow-dark);
      }

      [data-theme="dark"] .btn-secondary {
        background: var(--bg-hover); border-color: var(--border); box-shadow: none;
      }

      .btn-secondary:hover {
        background: var(--bg-card-hover); color: var(--primary);
        border-color: rgba(91, 108, 249, 0.2);
        transform: translateY(-1px); box-shadow: var(--shadow-sm);
      }

      .btn-primary {
        background: linear-gradient(135deg, #6B7BFF, #4F5FD4);
        color: #fff;
        box-shadow: var(--shadow-button);
      }

      .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-button-hover);
        filter: brightness(1.08);
      }

      .btn-danger {
        background: linear-gradient(135deg, #E05C5C, #c44848);
        color: #fff; border-color: transparent;
        box-shadow: 0 4px 14px rgba(224, 92, 92, 0.3);
      }

      .btn-danger:hover {
        transform: translateY(-1px);
        box-shadow: 0 8px 20px rgba(224, 92, 92, 0.4);
        filter: brightness(1.06);
      }

      .btn-warning {
        background: var(--warning-bg); color: var(--warning-text);
        border-color: rgba(245, 158, 11, 0.15);
      }

      .btn-warning:hover {
        background: rgba(245, 158, 11, 0.15);
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(245, 158, 11, 0.15);
      }

      .btn-success {
        background: var(--success-bg); color: var(--success-text);
        border-color: rgba(16, 185, 129, 0.15);
      }

      .btn-success:hover {
        background: rgba(16, 185, 129, 0.15);
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(16, 185, 129, 0.15);
      }

      .btn-sm {
        padding: 6px 12px; font-size: 12px;
        border-radius: var(--radius-sm); min-height: 32px;
      }

      .btn:disabled, .btn.disabled {
        background: #C5C9D6; color: #8890A0;
        cursor: not-allowed; opacity: 0.7; box-shadow: none;
        border-color: transparent;
        transform: none !important; filter: none !important;
      }

      /* ===== BADGES ===== */
      .badge {
        display: inline-flex; align-items: center;
        padding: 3px 12px;
        border-radius: var(--radius-pill);
        font-size: 11px; font-weight: 600; letter-spacing: 0.2px;
      }

      .badge-info { background: var(--info-bg); color: var(--info-text); }
      .badge-success { background: var(--success-bg); color: var(--success-text); }
      .badge-warning { background: var(--warning-bg); color: var(--warning-text); }
      .badge-danger { background: var(--danger-bg); color: var(--danger-text); }
      .badge-gray { background: var(--bg-hover); color: var(--text-muted); }

      /* ===== TABLES ===== */
      table { width: 100%; border-collapse: separate; border-spacing: 0; }

      th {
        text-align: left; padding: 12px 16px;
        font-size: 11px; text-transform: uppercase; letter-spacing: 0.7px;
        color: var(--text-muted);
        border-bottom: 1px solid var(--border);
        background: var(--table-header-bg); font-weight: 600;
      }

      th:first-child { border-radius: var(--radius-sm) 0 0 0; }
      th:last-child { border-radius: 0 var(--radius-sm) 0 0; }

      td {
        padding: 12px 16px; font-size: 13px;
        border-bottom: 1px solid var(--border);
        color: var(--text-secondary);
        transition: all 0.15s ease;
      }

      tr:hover td { background: var(--table-row-hover); color: var(--text-primary); }
      tr:last-child td { border-bottom: none; }

      /* ===== FORMS ===== */
      .form-group { margin-bottom: var(--spacing-md); }

      .form-group label {
        display: block; font-size: 12px; font-weight: 600;
        color: var(--text-muted); margin-bottom: 6px;
        text-transform: uppercase; letter-spacing: 0.4px;
      }

      .form-input,
      input[type="text"], input[type="email"], input[type="password"],
      input[type="number"], input[type="date"], input[type="tel"],
      input[type="url"], input[type="search"],
      select, textarea {
        width: 100%; padding: 11px 16px;
        background: var(--bg-input);
        backdrop-filter: blur(6px);
        border: 1.5px solid var(--border);
        border-radius: var(--radius-md);
        font-size: 14px; color: var(--text-primary);
        font-family: inherit;
        transition: all 0.25s var(--transition-default);
        outline: none;
        box-shadow: var(--neu-inset-light), var(--neu-inset-dark);
      }

      .form-input::placeholder, input::placeholder, textarea::placeholder {
        color: var(--text-placeholder);
      }

      .form-input:focus, input:focus, select:focus, textarea:focus {
        border-color: var(--border-focus);
        background: var(--bg-input-focus);
        box-shadow: 0 0 0 3px var(--primary-glow), 0 0 16px rgba(91, 108, 249, 0.06);
      }

      .form-input:hover:not(:focus), input:hover:not(:focus),
      select:hover:not(:focus), textarea:hover:not(:focus) {
        border-color: var(--border-hover);
      }

      textarea.form-input, textarea { resize: vertical; min-height: 100px; }

      select.form-input, select {
        cursor: pointer; appearance: none;
        padding-right: 36px;
        background-repeat: no-repeat;
        background-position: right 14px center;
      }

      [data-theme="light"] select.form-input, [data-theme="light"] select {
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='14' height='14' fill='%237A7F9A' viewBox='0 0 16 16'%3E%3Cpath d='M8 11L3 6h10l-5 5z'/%3E%3C/svg%3E");
      }

      [data-theme="dark"] select.form-input, [data-theme="dark"] select {
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='14' height='14' fill='rgba(255,255,255,0.3)' viewBox='0 0 16 16'%3E%3Cpath d='M8 11L3 6h10l-5 5z'/%3E%3C/svg%3E");
      }

      select.form-input option, select option {
        background: var(--bg-card); color: var(--text-primary);
      }

      input[type="checkbox"] {
        width: 18px; height: 18px;
        accent-color: var(--primary); cursor: pointer;
      }

      /* ===== SEARCH BAR ===== */
      .search-bar {
        display: flex; gap: 8px;
        margin-bottom: var(--spacing-md); align-items: center;
      }
      .search-bar input, .search-bar select { box-shadow: none; }
      .search-bar input { flex: 1; }

      /* ===== FLEX ===== */
      .flex-between {
        display: flex; justify-content: space-between;
        align-items: center; flex-wrap: wrap; gap: 10px;
      }

      /* ===== EMPTY STATE ===== */
      .empty-state { text-align: center; padding: 48px 24px; }
      .empty-state h3 { font-size: 17px; color: var(--text-secondary); margin-bottom: 6px; font-weight: 600; }
      .empty-state p { color: var(--text-muted); font-size: 14px; }

      /* ===== PAGINATION ===== */
      .pagination {
        display: flex; gap: 6px; justify-content: center; padding: 16px 0;
      }

      .pagination a, .pagination .current {
        padding: 8px 14px; border-radius: var(--radius-sm);
        font-size: 13px; text-decoration: none; font-weight: 500;
        min-width: 38px; text-align: center;
        transition: all 0.2s var(--transition-default);
      }

      .pagination a {
        background: rgba(255, 255, 255, 0.5);
        color: var(--text-secondary); border: 1px solid var(--border-card);
      }

      [data-theme="dark"] .pagination a {
        background: var(--bg-hover); border-color: var(--border);
      }

      .pagination a:hover {
        background: var(--primary-glow); color: var(--primary);
        border-color: rgba(91, 108, 249, 0.2);
        transform: translateY(-1px);
      }

      .pagination .current {
        background: linear-gradient(135deg, #6B7BFF, #4F5FD4);
        color: #fff;
        box-shadow: 0 3px 12px rgba(91, 108, 249, 0.3);
      }

      /* ===== TOAST ===== */
      .toast-container {
        position: fixed; top: 16px; right: 16px; z-index: 9999;
        display: flex; flex-direction: column; gap: 8px;
      }

      .toast {
        padding: 14px 18px;
        border-radius: var(--radius-md);
        font-size: 13px; font-weight: 500;
        backdrop-filter: var(--glass-blur);
        -webkit-backdrop-filter: var(--glass-blur);
        animation: toastSlideIn 0.4s var(--transition-bounce);
        cursor: pointer;
        display: flex; align-items: center; gap: 10px;
        box-shadow: var(--shadow-md);
        border: 1px solid; max-width: 380px;
      }

      .toast-icon { flex-shrink: 0; display: flex; align-items: center; justify-content: center; }
      .toast-icon svg { animation: toastIconPop 0.4s var(--transition-bounce) 0.2s both; }

      @keyframes toastIconPop {
        from { transform: scale(0); }
        50% { transform: scale(1.2); }
        to { transform: scale(1); }
      }

      .toast-message { flex: 1; }

      .toast-close {
        background: none; border: none; color: inherit;
        cursor: pointer; opacity: 0.5;
        transition: opacity 0.2s; padding: 2px;
        display: flex; align-items: center;
      }
      .toast-close:hover { opacity: 1; }

      .toast-success { background: rgba(16, 185, 129, 0.12); color: var(--success-text); border-color: rgba(16, 185, 129, 0.15); }
      .toast-error { background: rgba(224, 92, 92, 0.12); color: var(--danger-text); border-color: rgba(224, 92, 92, 0.15); }
      .toast-info { background: rgba(79, 142, 247, 0.12); color: var(--info-text); border-color: rgba(79, 142, 247, 0.15); }
      .toast-warning { background: rgba(245, 158, 11, 0.12); color: var(--warning-text); border-color: rgba(245, 158, 11, 0.15); }

      @keyframes toastSlideIn {
        from { transform: translateX(110%) scale(0.9); opacity: 0; }
        to { transform: translateX(0) scale(1); opacity: 1; }
      }

      @keyframes toastSlideOut {
        to { transform: translateX(110%); opacity: 0; }
      }

      /* ===== MODAL ===== */
      .modal-overlay {
        display: none; position: fixed; inset: 0;
        background: rgba(0, 0, 0, 0.35);
        backdrop-filter: blur(6px);
        z-index: 1000;
        align-items: center; justify-content: center;
      }

      .modal-overlay.active { display: flex; }

      .modal {
        background: var(--bg-card);
        backdrop-filter: var(--glass-blur-strong);
        border: 1px solid var(--border-card);
        border-radius: var(--radius-xl);
        padding: var(--spacing-lg);
        max-width: 500px; width: 92%;
        max-height: 82vh; overflow-y: auto;
        animation: modalPop 0.35s var(--transition-bounce);
        box-shadow: var(--shadow-lg);
      }

      @keyframes modalPop {
        from { transform: scale(0.9) translateY(16px); opacity: 0; }
        to { transform: scale(1) translateY(0); opacity: 1; }
      }

      .modal-header {
        display: flex; justify-content: space-between; align-items: center;
        margin-bottom: var(--spacing-md);
      }

      .modal-header h3 { font-size: 17px; font-weight: 700; color: var(--text-primary); }

      .modal-close {
        width: 34px; height: 34px;
        background: var(--bg-hover); border: 1px solid var(--border);
        border-radius: var(--radius-sm); color: var(--text-muted);
        cursor: pointer; font-size: 16px;
        display: flex; align-items: center; justify-content: center;
        transition: all 0.2s ease;
      }

      .modal-close:hover {
        background: var(--danger-bg); color: var(--danger-text);
        border-color: rgba(224, 92, 92, 0.15);
      }

      /* ===== HELPERS ===== */
      .actions { display: flex; gap: 6px; flex-wrap: wrap; }
      .mt-10 { margin-top: 10px; }
      .mb-20 { margin-bottom: 20px; }

      /* ===== MOBILE ===== */
      .mobile-menu-btn {
        display: none;
        width: 40px; height: 40px;
        align-items: center; justify-content: center;
        background: var(--bg-hover); border: 1px solid var(--border);
        border-radius: var(--radius-sm); color: var(--text-primary);
        font-size: 16px; cursor: pointer;
        transition: all 0.2s ease;
      }
      .mobile-menu-btn:hover { background: var(--bg-card-hover); }

      .sidebar-overlay {
        display: none; position: fixed; inset: 0;
        background: rgba(0, 0, 0, 0.3);
        backdrop-filter: blur(4px); z-index: 99;
      }
      .sidebar-overlay.active { display: block; }

      @media (max-width: 768px) {
        .sidebar { transform: translateX(-100%); width: 272px !important; box-shadow: none; }
        .sidebar.open { transform: translateX(0); box-shadow: 16px 0 48px rgba(0, 0, 0, 0.15); }
        .main-content { margin-left: 0 !important; }
        .mobile-menu-btn { display: flex; }
        .stats-grid { grid-template-columns: repeat(2, 1fr); }
        .content-area { padding: var(--spacing-md); }
        .nav-name { display: none; }
      }

      @media (max-width: 480px) {
        .stats-grid { grid-template-columns: 1fr; }
      }

      /* ===== DASHBOARD SPECIFIC ===== */
      .dashboard-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: var(--spacing-md);
      }

      @media (max-width: 768px) {
        .dashboard-grid { grid-template-columns: 1fr; }
      }

      /* Announcement Feed */
      .announcement-feed { display: flex; flex-direction: column; }

      .announcement-feed-item {
        display: flex; align-items: center; gap: 14px;
        padding: 14px 4px;
        border-bottom: 1px solid var(--border);
        text-decoration: none; color: inherit;
        border-radius: var(--radius-sm);
        transition: all 0.2s var(--transition-default);
      }

      .announcement-feed-item:last-child { border-bottom: none; }

      .announcement-feed-item:hover {
        background: var(--bg-hover);
        padding-left: 10px; padding-right: 10px;
      }

      .announcement-feed-icon {
        width: 40px; height: 40px;
        border-radius: var(--radius-sm);
        background: var(--primary-glow);
        display: flex; align-items: center; justify-content: center;
        font-size: 18px; flex-shrink: 0;
      }

      .announcement-feed-content { flex: 1; min-width: 0; }

      .announcement-feed-title {
        display: block; font-size: 14px; font-weight: 600;
        color: var(--text-primary);
        white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
      }

      .announcement-feed-meta {
        display: block; font-size: 12px; color: var(--text-muted); margin-top: 2px;
      }

      .announcement-feed-arrow {
        color: var(--text-muted); flex-shrink: 0;
        opacity: 0; transform: translateX(-4px);
        transition: all 0.2s ease;
      }

      .announcement-feed-item:hover .announcement-feed-arrow {
        opacity: 1; transform: translateX(0);
      }

      /* Activity List */
      .activity-list { display: flex; flex-direction: column; }

      .activity-item {
        display: flex; align-items: flex-start; gap: 12px;
        padding: 10px 0;
        border-bottom: 1px solid var(--border);
      }

      .activity-item:last-child { border-bottom: none; }

      .activity-dot {
        width: 8px; height: 8px;
        border-radius: 50%; margin-top: 5px; flex-shrink: 0;
      }

      .dot-info { background: var(--info); box-shadow: 0 0 8px rgba(79, 142, 247, 0.4); }
      .dot-danger { background: var(--danger); box-shadow: 0 0 8px rgba(224, 92, 92, 0.4); }
      .dot-success { background: var(--success); box-shadow: 0 0 8px rgba(16, 185, 129, 0.4); }
      .dot-warning { background: var(--warning); box-shadow: 0 0 8px rgba(245, 158, 11, 0.4); }

      .activity-content {
        flex: 1; display: flex; justify-content: space-between;
        align-items: flex-start; gap: 8px; min-width: 0;
      }

      .activity-text { font-size: 13px; color: var(--text-secondary); line-height: 1.4; }
      .activity-text strong { color: var(--text-primary); font-weight: 600; }

      .activity-time {
        font-size: 11px; color: var(--text-muted);
        white-space: nowrap; flex-shrink: 0;
      }

      /* Quick Actions */
      .quick-actions-list { display: flex; flex-direction: column; gap: 4px; }

      .quick-action-item {
        display: flex; align-items: center; gap: 12px;
        padding: 11px 14px;
        border-radius: var(--radius-sm);
        text-decoration: none;
        color: var(--text-secondary);
        font-size: 13px; font-weight: 500;
        transition: all 0.2s var(--transition-default);
        border: 1px solid transparent;
      }

      .quick-action-item:hover {
        background: var(--bg-hover);
        color: var(--primary);
        border-color: var(--border);
        transform: translateX(4px);
      }

      .quick-action-icon {
        width: 34px; height: 34px;
        border-radius: var(--radius-sm);
        background: var(--primary-glow);
        display: flex; align-items: center; justify-content: center;
        font-size: 16px; flex-shrink: 0;
        transition: all 0.2s ease;
      }

      .quick-action-item:hover .quick-action-icon {
        background: var(--primary-glow-strong);
        transform: scale(1.05);
      }

      .quick-action-text { flex: 1; }

      .quick-action-item svg {
        color: var(--text-muted); opacity: 0;
        transform: translateX(-4px);
        transition: all 0.2s ease; flex-shrink: 0;
      }

      .quick-action-item:hover svg {
        opacity: 1; transform: translateX(0); color: var(--primary);
      }

      /* Info Card */
      .info-card-body { padding: 8px 0; }

      .info-greeting {
        font-size: 14px; color: var(--text-secondary);
        font-weight: 500; margin-bottom: 16px;
      }

      .info-list {
        list-style: none; padding: 0; margin: 0;
        display: flex; flex-direction: column; gap: 10px;
      }

      .info-list li {
        display: flex; align-items: center; gap: 12px;
        font-size: 13px; color: var(--text-secondary);
        line-height: 1.5;
        padding: 8px 12px;
        border-radius: var(--radius-sm);
        background: var(--bg-hover);
        border: 1px solid var(--border);
        transition: all 0.2s ease;
      }

      .info-list li:hover {
        border-color: var(--border-hover);
        transform: translateX(3px);
      }

      .info-list-icon {
        width: 28px; height: 28px;
        border-radius: 8px;
        background: var(--primary-glow);
        display: flex; align-items: center; justify-content: center;
        font-size: 13px; flex-shrink: 0;
      }

      /* ===== REDUCED MOTION ===== */
      @media (prefers-reduced-motion: reduce) {
        *, *::before, *::after {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.15s !important;
        }
        .page-transition-wrapper, .page-transition-wrapper > * {
          animation: none !important; opacity: 1; transform: none;
        }
        .card:hover, .stat-card:hover, .btn:hover {
          transform: none !important;
        }
      }

      /* ===== PRINT ===== */
      @media print {
        .sidebar, .navbar, .footer, .btn, .actions,
        .toast-container, .sidebar-overlay, .mobile-menu-btn, .theme-toggle {
          display: none !important;
        }
        .main-content { margin-left: 0 !important; }
        body { background: #fff !important; color: #2D3250 !important; }
        .card, .stat-card {
          background: #fff !important;
          border: 1px solid #e5e7eb !important;
          box-shadow: none !important; backdrop-filter: none !important;
        }
      }
    </style>
  </head>
  <body>
    <!-- Mobile Overlay -->
    <div class="sidebar-overlay" id="sidebarOverlay" onclick="closeMobileSidebar()"></div>

    <!-- Sidebar -->
    {% if request.user.role == 'admin' %}{% include 'layouts/_sidebar_admin.html' %}
    {% elif request.user.role == 'hod' %}{% include 'layouts/_sidebar_hod.html' %}
    {% elif request.user.role == 'teacher' %}{% include 'layouts/_sidebar_teacher.html' %}
    {% elif request.user.role == 'guardian' %}{% include 'layouts/_sidebar_guardian.html' %}
    {% endif %}

    <!-- Main -->
    <div class="main-content" id="mainContent">
      {% include 'layouts/_navbar.html' %}

      <div class="content-area">
        <div class="page-transition-wrapper">
          {% if messages %}
          <div class="toast-container" id="toastContainer">
            {% for message in messages %}
            <div class="toast toast-{{ message.tags }}" onclick="dismissToast(this)">
              <div class="toast-icon">
                {% if message.tags == 'success' %}‚úÖ
                {% elif message.tags == 'error' %}‚ùå
                {% elif message.tags == 'warning' %}‚ö†Ô∏è
                {% else %}‚ÑπÔ∏è{% endif %}
              </div>
              <span class="toast-message">{{ message }}</span>
            </div>
            {% endfor %}
          </div>
          {% endif %}

          {% block content %}{% endblock %}
        </div>
      </div>

      {% include 'layouts/_footer.html' %}
    </div>

    <script>
      /* Theme */
      function getStoredTheme() { return localStorage.getItem('sms-theme') || 'light'; }
      function setTheme(theme) {
        document.documentElement.setAttribute('data-theme', theme);
        localStorage.setItem('sms-theme', theme);
        var icon = document.getElementById('themeIcon');
        if (icon) icon.textContent = theme === 'dark' ? 'üåô' : '‚òÄÔ∏è';
      }
      function toggleTheme() {
        var c = document.documentElement.getAttribute('data-theme');
        setTheme(c === 'dark' ? 'light' : 'dark');
      }

      /* Sidebar */
      function toggleSidebarCollapse() {
        var s = document.getElementById('sidebar');
        var i = document.getElementById('collapseIcon');
        if (s) {
          s.classList.toggle('collapsed');
          if (i) i.textContent = s.classList.contains('collapsed') ? '‚ñ∂' : '‚óÄ';
          localStorage.setItem('sms-sidebar-collapsed', s.classList.contains('collapsed'));
        }
      }
      function toggleMobileSidebar() {
        var s = document.getElementById('sidebar');
        var o = document.getElementById('sidebarOverlay');
        if (s) s.classList.toggle('open');
        if (o) o.classList.toggle('active');
      }
      function closeMobileSidebar() {
        var s = document.getElementById('sidebar');
        var o = document.getElementById('sidebarOverlay');
        if (s) s.classList.remove('open');
        if (o) o.classList.remove('active');
      }

      /* Toast */
      function dismissToast(el) {
        if (!el) return;
        el.style.animation = 'toastSlideOut 0.3s ease forwards';
        setTimeout(function() { el.remove(); }, 300);
      }

      /* Init */
      document.addEventListener('DOMContentLoaded', function() {
        setTheme(getStoredTheme());

        var isCollapsed = localStorage.getItem('sms-sidebar-collapsed') === 'true';
        var sidebar = document.getElementById('sidebar');
        var collapseIcon = document.getElementById('collapseIcon');
        if (isCollapsed && sidebar && window.innerWidth > 768) {
          sidebar.classList.add('collapsed');
          if (collapseIcon) collapseIcon.textContent = '‚ñ∂';
        }

        var collapseBtn = document.getElementById('collapseBtn');
        if (collapseBtn && window.innerWidth > 768) collapseBtn.style.display = 'flex';

        /* Ripple */
        document.querySelectorAll('.btn').forEach(function(btn) {
          btn.addEventListener('mousedown', function(e) {
            this.querySelectorAll('.ripple').forEach(function(r) { r.remove(); });
            var ripple = document.createElement('span');
            ripple.className = 'ripple';
            var rect = this.getBoundingClientRect();
            var size = Math.max(rect.width, rect.height);
            ripple.style.width = ripple.style.height = size + 'px';
            ripple.style.left = (e.clientX - rect.left - size / 2) + 'px';
            ripple.style.top = (e.clientY - rect.top - size / 2) + 'px';
            this.appendChild(ripple);
            setTimeout(function() { ripple.remove(); }, 600);
          });
        });

        /* Auto-dismiss toasts */
        setTimeout(function() {
          document.querySelectorAll('.toast').forEach(function(t, i) {
            setTimeout(function() { dismissToast(t); }, i * 100);
          });
        }, 5000);
      });

      /* Accordion */
      function toggleAccordion(id) {
        var el = document.getElementById(id);
        if (el) el.style.display = el.style.display === 'none' ? 'block' : 'none';
      }

      /* Escape */
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
          document.querySelectorAll('.modal-overlay.active').forEach(function(m) { m.classList.remove('active'); });
          closeMobileSidebar();
        }
      });

      window.addEventListener('resize', function() {
        if (window.innerWidth > 768) closeMobileSidebar();
      });
    </script>
  </body>
</html>