{% extends 'layouts/base.html' %} {% block title %}Teachers - SMS Portal{%
endblock %} {% block breadcrumb %}Admin > Teachers{% endblock %} {% block
content %}
<div class="page-header flex-between">
  <div>
    <h1>ğŸ‘¨â€ğŸ« Teachers</h1>
    <p>Manage teacher accounts</p>
  </div>
  <a href="{% url 'teacher_create' %}" class="btn btn-primary"
    >+ Create Teacher</a
  >
</div>

<div class="card">
  <form method="GET" class="search-bar">
    <input
      type="text"
      name="search"
      placeholder="Search teachers..."
      value="{{ search }}"
    />
    <select name="department" onchange="this.form.submit()">
      <option value="">All Departments</option>
      {% for dept in departments %} {% if dept %}
      <option
        value="{{ dept }}"
        {%
        if
        dept=""
        ="selected_department"
        %}selected{%
        endif
        %}
      >
        {{ dept }}
      </option>
      {% endif %} {% endfor %}
    </select>
    <button type="submit" class="btn btn-secondary btn-sm">Search</button>
  </form>

  {% if page_obj.object_list %}
  <table>
    <thead>
      <tr>
        <th>#</th>
        <th>Name</th>
        <th>Email</th>
        <th>Phone</th>
        <th>Department</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for teacher in page_obj %}
      <tr>
        <td>{{ forloop.counter }}</td>
        <td><strong>{{ teacher.full_name }}</strong></td>
        <td>{{ teacher.email }}</td>
        <td>{{ teacher.phone|default:"-" }}</td>
        <td>{{ teacher.department|default:"-" }}</td>
        <td class="actions">
          <a
            href="{% url 'teacher_detail' pk=teacher.pk %}"
            class="btn btn-secondary btn-sm"
            >ğŸ‘ View</a
          >
          <a
            href="{% url 'teacher_edit' pk=teacher.pk %}"
            class="btn btn-warning btn-sm"
            >âœï¸ Edit</a
          >
          <form
            method="POST"
            action="{% url 'teacher_delete' pk=teacher.pk %}"
            style="display: inline"
            onsubmit="
              return confirm('Are you sure you want to delete this teacher?');
            "
          >
            {% csrf_token %}
            <button type="submit" class="btn btn-danger btn-sm">
              ğŸ—‘ Delete
            </button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  {% if page_obj.has_other_pages %}
  <div class="pagination">
    {% if page_obj.has_previous %}
    <a
      href="?page={{ page_obj.previous_page_number }}&search={{ search }}&department={{ selected_department }}"
      >â† Prev</a
    >
    {% endif %} {% for num in page_obj.paginator.page_range %} {% if
    page_obj.number == num %}
    <span class="current">{{ num }}</span>
    {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
    <a
      href="?page={{ num }}&search={{ search }}&department={{ selected_department }}"
      >{{ num }}</a
    >
    {% endif %} {% endfor %} {% if page_obj.has_next %}
    <a
      href="?page={{ page_obj.next_page_number }}&search={{ search }}&department={{ selected_department }}"
      >Next â†’</a
    >
    {% endif %}
  </div>
  {% endif %} {% else %}
  <div class="empty-state">
    <h3>No teachers found</h3>
    <p>Create your first teacher to get started.</p>
    <a href="{% url 'teacher_create' %}" class="btn btn-primary mt-10"
      >+ Create Teacher</a
    >
  </div>
  {% endif %}
</div>
{% endblock %}
